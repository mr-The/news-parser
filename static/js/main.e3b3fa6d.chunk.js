(this["webpackJsonpnews-aggregator"]=this["webpackJsonpnews-aggregator"]||[]).push([[0],{261:function(e,t,n){},262:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(29),c=n.n(r),s=n(64),i=n(274),o=n(276),l={postClasses:{donland:{createDate:".news-detail__date",title:".news-detail__column.news-detail__column--left h1",image:".js-photo img",text:".news-detail__detail p"},donnews:{createDate:".article__date",title:".article__title",image:".article__picture img",text:".article__content p"},batayskGorod:{createDate:".news-detail.simple .detail__date",title:".detail-name",image:".detail__picture",text:".js-mediator-article p"}},sites:{donland:"https://www.donland.ru/news/",donnews:"https://www.donnews.ru/archive/1/",batayskGorod:"https://bataysk-gorod.ru/novosti-batayska/"},linkClasses:{donland:".list__items .list__item-body a.list__item-link",donnews:".catalog__shell a",batayskGorod:".detail__full .line .line__item"}},u=Object.keys(l.sites),d={sites:u,source:u[0]},j=n(17),p=n.n(j),f=n(30),b=n(118),h=n(119),O=n.n(h),x="https://fierce-bayou-16728.herokuapp.com/",g=function(){var e=Object(f.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){O.a.get(x+t).then((function(a){var r=a.data,c=b.load(r),s=t.match(/\/\/(.*?)\//)[1],i=c(n.createDate).text(),o=c(n.title).text().trim(),l=c(n.image).attr("src");l=l&&l.indexOf("https")>=0?l:"https://".concat(s).concat(l);var u=c(n.text).text().trim();e({createDate:i,title:o,image:l,text:u,url:t})})).catch((function(e){return console.log(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(f.a)(p.a.mark((function e(t,n,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){O.a.get(x+t).then((function(r){var c=r.data,s=b.load(c),i=t.match(/\/\/(.*?)\//)[1],o=[];a=a||(a=s(n).length),s(n).each((function(e,t){if(e<a){var n=s(t).attr("href");n=(n=n&&n.indexOf("./")>=0?n.replace("./","/news/"):n)&&n.indexOf("https")>=0?n:"https://".concat(i).concat(n),o.push(n)}})),e(o)})).catch((function(e){return console.log(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(f.a)(p.a.mark((function e(t,n){var a,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],r=0;case 2:if(!(r<t.length)){e.next=11;break}return e.next=5,g(t[r],n).then((function(e){return e})).catch((function(e){return console.log(e)}));case 5:c=e.sent,a.push(c),setTimeout((function(){}),1e3);case 8:r++,e.next=2;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function _(){return(_=Object(f.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){var e=Object(f.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(l.sites[t],l.linkClasses[t],n).then((function(e){return e})).catch((function(e){return console.log(e)}));case 2:return a=e.sent,e.next=5,v(a,l.postClasses[t]);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.next=3,a(t,n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(e,t){return _.apply(this,arguments)},y=function(e){return{type:"SET_UPLOADING",payload:e}},S=function(e){return{type:"SET_POSTS",payload:e}},k=n(280),D=n(279),E=n(67),C=n(4),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e[0].toUpperCase()+e.slice(1)},T=function(e){var t=e.source,n=void 0===t?"":t,a=e.sites,r=e.handleChangeSource,c=e.className;return Object(C.jsxs)(k.a,{as:"h2",className:c,children:["\u0421\u0430\u0439\u0442: ",n&&N(n),Object(C.jsx)("div",{className:"button-group",children:Object(C.jsx)(D.a.Group,{basic:!0,children:a&&a&&a.map((function(e){return Object(C.jsxs)(D.a,{icon:!0,labelPosition:"left",active:n===e,onClick:function(){r(e)},children:[Object(C.jsx)(E.a,{name:"world"}),N(e)]},e)}))})})]})},G=n(165),I=n(94),P=n(275),A=n(281),U=n(166);var J=function(e){var t=e.modalData,n=e.modalOpen,a=e.setModalOpen,r=t.title,c=t.description,s=t.image,i=t.createDate,o=t.url;return Object(C.jsxs)(P.a,{onClose:function(){return a(!1)},open:n,children:[Object(C.jsxs)(A.a,{clearing:!0,children:[Object(C.jsx)(k.a,{as:"h2",children:r}),Object(C.jsx)(I.a,{as:"span",color:"teal",ribbon:"right",content:i})]}),Object(C.jsx)(U.a,{fluid:!0,src:s,wrapped:!0}),Object(C.jsx)(P.a.Content,{children:Object(C.jsx)(P.a.Description,{children:Object(C.jsx)("p",{children:c})})}),Object(C.jsxs)(P.a.Actions,{children:[Object(C.jsx)("a",{href:o,target:"_blank",rel:"noreferrer",children:Object(C.jsx)(D.a,{floated:"left",content:"\u041e\u0440\u0438\u0433\u0438\u043d\u0430\u043b",labelPosition:"left",icon:"arrow circle left",primary:!0})}),Object(C.jsx)(D.a,{secondary:!0,onClick:function(){return a(!1)},children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]})]})},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.substr(0,500)+"..."},R=function(e,t,n){return Object(C.jsx)(J,{modalData:e,modalOpen:t,setModalOpen:n})},H=function(e){var t,n=e.title,r=e.description,c=e.image,s=e.createDate,i=e.url,l=Object(a.useState)(!1),u=Object(G.a)(l,2),d=u[0],j=u[1];t={title:n,description:r,image:c,createDate:s,url:i};return Object(C.jsxs)(C.Fragment,{children:[d?R(t,d,j):"",Object(C.jsxs)(o.a,{onClick:function(){j(!d)},children:[Object(C.jsx)(o.a.Image,{size:"medium",src:c}),Object(C.jsxs)(o.a.Content,{verticalAlign:"top",children:[Object(C.jsx)(o.a.Header,{as:"a",children:n}),Object(C.jsx)(o.a.Description,{children:L(r)}),Object(C.jsx)(o.a.Extra,{children:Object(C.jsx)(I.a,{icon:"eye",color:"teal",content:s})})]})]})]})},M=n(278),z=n(273),F=function(e){var t=e.text;return Object(C.jsxs)("div",{className:"loader-block",children:[Object(C.jsx)(M.a,{fluid:!0,children:Object(C.jsxs)(M.a.Header,{children:[Object(C.jsx)(M.a.Line,{length:"full"}),Object(C.jsx)(M.a.Line,{length:"full"}),Object(C.jsx)(M.a.Line,{length:"full"}),Object(C.jsx)(z.a,{active:!0,size:"large"})]})}),Object(C.jsx)("p",{style:{textAlign:"center",color:"teal"},children:t})]})};var X=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.sources})),n=t.sites,r=void 0===n?[]:n,c=t.source,l=Object(s.c)((function(e){return e})).posts,u=void 0===l?[]:l,j=u[c]||[],b=u.uploading;return Object(a.useEffect)((function(){e({type:"SET_SOURCES",payload:d})}),[e]),Object(a.useEffect)((function(){var t;e((t=c,function(e){var n=localStorage.getItem(t),a=JSON.parse(n)||{};e(y(!0)),a&&e(S({site:t,newData:a}));var r=function(){var r=Object(f.a)(p.a.mark((function r(){var c;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e(y(!0)),r.next=3,w(t);case 3:c=r.sent,Object.keys(a).length?(c=c.reverse()).forEach((function(e){n.includes(JSON.stringify(e))||a.unshift(e)})):a=c,a=a.length>15?a.slice(0,15):a,localStorage.setItem(t,JSON.stringify(a)),localStorage.setItem("".concat(t,"-uploadTime"),JSON.stringify(Date.now())),e(S({site:t,newData:a}));case 9:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();Date.now()-localStorage.getItem("".concat(t,"-uploadTime"))>216e5&&r()}))}),[e,c]),Object(C.jsx)(i.a,{children:Object(C.jsxs)("div",{className:"App",children:[r.length&&Object(C.jsx)(T,{className:b?"p-static":"",source:c,sites:r,handleChangeSource:function(t){e({type:"CHANGE_SOURCE",payload:t})}}),Object(C.jsx)(o.a.Group,{divided:!0,children:j.length?Object(C.jsxs)(C.Fragment,{children:[b?Object(C.jsx)(F,{text:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 ..."}):"",j.map((function(e){return Object(C.jsx)(H,{title:e.title,description:e.text,image:e.image,createDate:e.createDate,url:e.url},e.title)}))]}):Object(C.jsx)(F,{text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 ..."})})]})})},B=n(65),V=n(164),q=n(27),K={sites:[],source:""},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SOURCES":return Object(q.a)(Object(q.a)({},e),t.payload);case"CHANGE_SOURCE":return Object(q.a)(Object(q.a)({},e),{},{source:t.payload});default:return e}},W=n(71),Y={},Z=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_POSTS":var a=n.payload.site;return Object(q.a)(Object(q.a)({},t),{},(e={},Object(W.a)(e,a,n.payload.newData),Object(W.a)(e,"uploading",n.payload.uploading||!1),e));case"SET_UPLOADING":return Object(q.a)(Object(q.a)({},t),{},{uploading:n.payload});default:return t}},$=Object(B.b)({sources:Q,posts:Z}),ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||B.c,te=Object(B.d)($,ee(Object(B.a)(V.a)));n(260),n(261);c.a.render(Object(C.jsx)(s.a,{store:te,children:Object(C.jsx)(X,{})}),document.getElementById("root"))}},[[262,1,2]]]);
//# sourceMappingURL=main.e3b3fa6d.chunk.js.map